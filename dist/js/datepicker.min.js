!function(t,e){if("function"==typeof define&&define.amd)define(["mk-ui"],function(i){return e(t,i)});else{if("object"!=typeof module||!module.exports)return e(t,t.Mk);module.exports=e(t,require("mk-ui"))}}("undefined"!=typeof window&&window||this,function(t,e){function i(t){return"number"==typeof t}function a(){var t=new Date;return t.setHours(0,0,0,0),t}function s(){var t=new Date("garbage");return t.setHours(0,0,0,0),t.setDate(1),t}function n(t){return t.getDate()}function r(t){return t.getMonth()}function o(t){return t.getFullYear()}function l(t,e){t.setDate(i(e)?e:e.getDate())}function d(t,e){t.setMonth(i(e)?e:e.getMonth())}function h(t,e){t.setFullYear(i(e)?e:e.getFullYear())}function u(t,e){l(t,1),h(t,e),d(t,e),l(t,e)}function c(t){return 32-new Date(t.getFullYear(),t.getMonth(),32).getDate()}function f(t){var e=a();return e.setDate(1),e.setMonth(r(t)-1),e.setFullYear(o(t)),c(e)}function p(t){return new Date(o(t),r(t),1).getDay()}function m(t,e,i){if(isNaN(t))return e;i=i||{};var a;switch(e){case"m":return t+1;case"mm":return++t<10&&"0"+t||t;case"mmm":return a=(i.months||_)[t].slice(0,3),a.charAt(0).toUpperCase()+a.slice(1);case"mmmm":return a=(i.months||_)[t],a.charAt(0).toUpperCase()+a.slice(1);case"d":return t;case"dd":return t<10&&"0"+t||t;case"ddd":return a=(i.days||w)[t].slice(0,3),a.charAt(0).toUpperCase()+a.slice(1);case"dddd":return a=(i.days||w)[t],a.charAt(0).toUpperCase()+a.slice(1);case"yyyy":return t;case"yy":return t.toString().slice(2)}}function b(t,e){switch(e.slice(0,1)){case"y":return o(t);case"m":return r(t);case"d":return e.length>2?t.getDay():n(t)}return NaN}function v(t,e,i,a){var s;switch(i.slice(0,1)){case"d":s=c(t),e=e>s&&1||e>0&&e||s,l(t,e);break;case"m":e=e<0&&11||e<12&&e||0,d(t,e);break;case"y":h(t,e)}return m(e,i,a)}function g(t,i,a){var s;return e.fn.each(null,i.split(j),function(e){s=m(b(t,e),e,a),i=i.replace(new RegExp(e),s)}),i}function k(t,i){var s,n=a(),r=t.split(j),i=i.split(j);return e.fn.each(null,i,function(t,e){s=parseInt(r[e],10),t.indexOf("m")>-1&&(s-=1),v(n,s,t)}),n}var _=["january","february","march","april","may","june","july","august","september","october","november","december"],w=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],j=/\/|-|,\s|\s/,x=/(^|\w+)(\/|-|,\s|\s|$)/g;e.create("Datepicker",{_date:null,_uidate:null,xSplit:j,xSearch:x,name:"mk-dp",min:null,max:null,MIN:-864e13,MAX:864e13,formatmap:null,holidays:[],blackouts:[],special:{},formats:{native:"yyyy-mm-dd",date:"mm/dd/yyyy",days:"d",month:"mmmm",year:"yyyy",nextMo:"Go to next month",nextYr:"Go to next year",prevMo:"Go to previous month",prevYr:"Go to previous year",caption:"{{month}} {{year}}",label:"Choose a Date",label_d:"Select Day",label_m:"Select Month",label_y:"Enter a four digit year",label_trigger:"Open Calendar Interface",label_calendar:"{{month}} {{day}}, {{year}}"},templates:{shadow:'<div class="{{$key}}-shadow">\t\t\t\t\t<div class="{{$key}}-inputs">\t\t\t\t\t\t{{loop:inputs}}\t\t\t\t\t\t\t{{template:input}}\t\t\t\t\t\t{{/loop:inputs}}\t\t\t\t\t</div>\t\t\t\t\t{{template:calendar}}\t\t\t\t</div>',input:'<div class="{{$key}}-input-container">\t\t\t\t\t<label for="{{inputid}}" id="{{labelid}}" class="{{$key}}-label">{{label}}</label>\t\t\t\t\t<div class="{{$key}}-input" data-index="{{$index}}">\t\t\t\t\t\t{{loop:parts}}\t\t\t\t\t\t\t<span id="{{descid}}" class="{{$key}}-description">{{desc}}</span>\t\t\t\t\t\t\t{{if:select}}\t\t\t\t\t\t\t\t{{template:select}}\t\t\t\t\t\t\t{{/if:select}}\t\t\t\t\t\t\t{{if:number}}\t\t\t\t\t\t\t\t{{template:number}}\t\t\t\t\t\t\t{{/if:number}}\t\t\t\t\t\t\t{{if:spacer}}\t\t\t\t\t\t\t\t<span class="spacer">{{spacer}}</span>\t\t\t\t\t\t\t{{/if:spacer}}\t\t\t\t\t\t{{/loop:parts}}\t\t\t\t\t\t{{template:trigger}}\t\t\t\t\t</div>\t\t\t\t</div>',select:'<select required \t\t\t\t\tid="{{id}}" \t\t\t\t\trole="listbox" \t\t\t\t\tclass="{{$key}}-entry" \t\t\t\t\tdata-key="{{key}}"\t\t\t\t\tdata-format="{{format}}"\t\t\t\t\taria-labelledby="{{labelid}}" \t\t\t\t\taria-describedby="{{descid}}">\t\t\t\t\t{{loop:options}}\t\t\t\t\t\t<option value="{{value}}"{{if:selected}} selected{{/if:selected}}>{{label}}</option>\t\t\t\t\t{{/loop:options}}\t\t\t\t</select>',number:'<input \t\t\t\t\tid="{{id}}" \t\t\t\t\tclass="{{$key}}-entry" \t\t\t\t\ttype="text" \t\t\t\t\tvalue="{{value}}" \t\t\t\t\tplaceholder="{{format}}" \t\t\t\t\tdata-key="{{key}}"\t\t\t\t\tdata-format="{{format}}"\t\t\t\t\taria-labelledby="{{labelid}}" \t\t\t\t\taria-describedby="{{descid}}" />',calendar:'<div class="{{$key}}-calendar">\t\t\t\t\t{{template:controls}}\t\t\t\t\t{{template:table}}\t\t\t\t</div>',controls:'<div class="{{$key}}-controls">\t\t\t\t\t{{loop:controls}}\t\t\t\t\t\t<button class="{{$key}}-control {{name}}" aria-label="{{label}}"></button>\t\t\t\t\t{{/loop:controls}}\t\t\t\t</div>',table:'<table class="{{$key}}-table" tabindex="0" role="grid">\t\t\t\t\t<caption role="heading" class="{{$key}}-heading" aria-atomic="true" aria-live="assertive">{{caption}}</caption>\t\t\t\t\t<thead class="{{$key}}-head">\t\t\t\t\t\t<tr>\t\t\t\t\t\t{{loop:days}}\t\t\t\t\t\t\t<th aria-label="{{day}}">{{label}}</th>\t\t\t\t\t\t{{/loop:days}}\t\t\t\t\t\t</tr>\t\t\t\t\t</thead>\t\t\t\t\t{{template:body}}\t\t\t\t</table>',body:'<tbody class="{{$key}}-body">\t\t\t\t\t{{loop:weeks}}\t\t\t\t\t\t<tr>\t\t\t\t\t\t\t{{loop:days}}\t\t\t\t\t\t\t\t{{template:day}}\t\t\t\t\t\t\t{{/loop:days}}\t\t\t\t\t\t</tr>\t\t\t\t\t{{/loop:weeks}}\t\t\t\t</tbody>',day:'<td role="gridcell" id="{{id}}" data-value="{{value}}" aria-label="{{label}}" class="{{$key}}-day {{day}}{{if:special}} {{special}}{{/if:special}}{{if:first}} first{{/if:first}}{{if:last}} last{{/if:last}}{{if:blackout}} blackout{{/if:blackout}}{{if:selectable}} selectable{{/if:selectable}}{{if:today}} today{{/if:today}}{{if:active}} active{{/if:active}}{{if:disabled}} disabled{{/if:disabled}}{{if:between}} between{{/if:between}}{{if:rollover}} rollover{{/if:rollover}}{{if:holiday}} holiday{{/if:holiday}}">\t\t\t\t\t<span class="{{$key}}-date">{{date}}</span>\t\t\t\t</td>',trigger:'<button class="{{$key}}-trigger" aria-label="{{label_trigger}}"></button>',trap:'<button class="{{$key}}-trap" aria-hidden="true"></button>'},get uidate(){return this._uidate},set uidate(t){this._uidate=this.adjust(t)},get date(){return this._date},set date(t){this._date=this.adjust(t)},get disabled(){return this.input(0).prop("disabled")},get enabled(){return!this.disabled},get isHidden(){return"true"===this.calendar.attr("aria-hidden")},get isOpen(){return!this.isHidden},get isPopup(){return this.config.popup},get value(){return this.dts(this.date)},get inputs(){return this.node("")},get trigger(){return this.node("trigger",this.shadow)},get calendar(){return this.node("calendar",this.shadow)},get days(){return this.node("day.selectable",this.shadow)},get controls(){return this.node("control",this.shadow)},get heading(){return this.node("heading",this.shadow)},get activeDay(){var t=this.node("body",this.calendar),e=t.find(".active");return e.length&&!e.hasClass("disabled")||(e=t.find('[data-value="'+this.uidate.getDate()+'"]')),e.length&&!e.hasClass("disabled")||(e=t.find(".today")),e.length&&!e.hasClass("disabled")||(e=this.$(this.days[0])),e},init:function(t,e){this.formatmap={months:_,days:w},this.super(t,e)},configure:function(t){t=t||{},t.formatmap&&(this.formatmap=t.formatmap);var e=this.root,i=this.input(0),n=this.formats;t.fdate=i.val()||t.value,t.fmin=i.attr("min")||t.min,t.fmax=i.attr("max")||t.max,this.min=t.fmin&&this.std(t.fmin)||null,this.max=t.fmax&&this.std(t.fmax)||null,this.uidate=this.adjust(t.fdate&&this.std(t.fdate)||a()),this.date=this.adjust(t.fdate&&this.std(t.fdate)||s()),this.param("format","string",t,n.date,e).param("rollover","boolean",t,!0,e).param("label","string",t,n.label,e).param("popup","boolean",t,!0,e).param("holidays","object",t,this.holidays).param("blackouts","object",t,this.blackouts).param("special","object",t,this.special),this.super(t)},build:function(){this.shadow=this.html("shadow",this.data()),this.isPopup&&this.calendar.addClass("popup").attr({"aria-hidden":"true",role:"dialog"}).append(this.html("trap")),this.adjust(this.uidate,!0),this.activate()},mount:function(){this.shadow.appendTo(this.root)},unmount:function(){this.shadow.remove(),this.date=this.config=this.shadow=this.uidate=this.events=this.root=this.min=this.max=null},bind:function(){this._bindEntryEvents(),this._bindCalendarEvents()},_bindEntryEvents:function(){var t=this,e=this.selector("entry");this.node("input",this.shadow).on("mousedown.mk",e,function(e){t._disableDropdown(e,this)}).on("focus.mk",e,function(e){t._focusEntry(e,this)}).on("keydown.mk",e,function(e){t._keydownEntry(e,this)}).on("change.mk",e,function(e){t._applyEntry(e,this)}).on("blur.mk",e,function(e){t._setEntry(e,this)})},_bindCalendarEvents:function(){var t=this,e=this.calendar,i=!1;this.trigger.on("click.mk",function(e){t._open(e,this)}),this.node("trap",e).on("focus.mk",function(){t._trap()}),e.on("focus.mk",!0,function(e){var a=t.$(e.target);i=a.is(t.selector("table")),a.is(t.selector("control"))&&(t.controls.removeClass("focused"),a.addClass("focused"))}).on("blur.mk",!0,function(e){t._blur(e.relatedTarget||document.activeElement)}).on("keydown.mk",!0,function(e){t._keydownCalendar(e,i)}).on("click.mk",!0,function(e){e.preventDefault(),t._click(e)}).on("mouseenter",this.selector("day"),function(e){t._activate(this)})},_open:function(t,e){t.preventDefault();var i=this.$(e).parent(this.selector("input")),a=parseInt(i.data("index"),10);this.shadow.data("trigger-index",a),this.show()},_disableDropdown:function(t,e){"SELECT"===e.tagName&&(t.preventDefault(),e.focus())},_focusEntry:function(t,e){"INPUT"===e.tagName&&e.setSelectionRange(0,e.value.length)},_applyEntry:function(t,e){var i=this.$(e);parseInt(i.val(),10);this.setValue(i.data("key"),parseInt(i.val(),10),this.uidate),this.refresh()},_setEntry:function(t,e){var i=this.$(e),n=parseInt(i.val(),10),r=i.data("key"),o=a(),u=!0;if("m"===r){var f,p=i.parent().find('[data-key="d"] option'),o=a();l(o,1),d(o,n),f=c(o),p.each(function(t,e){t.disabled=e>f,t.disabled&&t.selected&&0!==e&&(u=!1,p[f].selected=!0)})}if(u){o=s();var m=i.parent(this.selector("input")),y=parseInt(m.find('[data-key="y"]').val(),10),b=parseInt(m.find('[data-key="m"]').val(),10),v=parseInt(m.find('[data-key="d"]').val(),10);isNaN(y)||h(o,y),isNaN(b)||d(o,b),isNaN(v)||l(o,v),this.valid(o)&&(this.select(o,!1),this.uidate=o,this.refresh())}},_findValueByKey:function(t,e){var i,a=this.$(e),s=null;this._typetimer&&(clearTimeout(this._typetimer),this._typetimer=null),this._chars=this._chars||"",this._chars+=t,i=new RegExp(this._chars,"i"),a.find("option").each(function(t,e){if(i.test(t.textContent))return s=t,!1}),s&&!s.disabled&&(s.selected=!0),this._typetimer=this.delay(function(){clearTimeout(this._typetimer),this._typetimer=null,this._chars=""},200)},_keydownEntry:function(t,e){var i=this.keycode,a=t.which,s=String.fromCharCode(a);return"SELECT"===e.tagName?void(/\w/.test(s)?(t.preventDefault(),this._findValueByKey(s,e)):a!==i.space&&a!==i.enter||t.preventDefault()):a===i.left||a===i.right?void t.preventDefault():a===i.up||a===i.down?(t.preventDefault(),this._moveEntry(e,a===i.up)):a!==i.tab&&a!==i.enter&&(t.preventDefault(),/\d/.test(s))?this._validateEntry(t,e,s):void 0},_moveEntry:function(t,e){var i=this.$(t),s=t.value;"y"===i.data("key")&&(s=parseInt(s,10),s+=e?1:-1,isNaN(s)&&(s=o(a())),this.max&&o(this.max)<s?s=o(this.max):this.min&&o(this.min)>s&&(s=o(this.min)),t.value=s,t.setSelectionRange(0,4),this._applyEntry(null,t))},_validateEntry:function(t,e,i){var a=this.$(e),s=e.selectionEnd,n=e.value,r=n.slice(0,s)+i+n.slice(s,n.length);"y"===a.data("key")&&(e.value=r.length>4?r.slice(-4):r,e.setSelectionRange(0,4),this._applyEntry(null,e))},_updateEntries:function(){var t,e=this.node("input",this.shadow),i=[this.date],a=this;this.each(i,function(i,s){this.valid(i)&&(t=this.node("entry",e[s]),t.each(function(t){t.value=a.getValue(t.getAttribute("data-format"),i)}))})},_activate:function(t){var e=this.$(t);e.hasClass("selectable")&&this.activate(e)},_trap:function(){this.$("button, table",this.calendar).each(function(t){if(!t.disabled)return t.focus(),!1})},_blur:function(t){var e=this.calendar,i=this.$(t);if(!t||!i.is(e)&&i.parent(e).length<1)return this.hide()},_click:function(t){var e=this.$(t.target),i=this.selector("day");return e.is(this.controls)?this._handleControl(t):(e=e.is(i)&&e||e.parent(i),void(e.length&&e.hasClass("selectable")&&this.select(e.data("value"))))},_handleControl:function(t){var e=this.$(t.target);return e.hasClass("prev-mo")&&this.moveMonth(!0,!1)||e.hasClass("next-mo")&&this.moveMonth(!1,!1)||e.hasClass("prev-yr")&&this.moveYear(!0,!1)||e.hasClass("next-yr")&&this.moveYear(!1,!1)},_move:function(t,e,i){var a=i.call(this,t[0],e&&"previousSibling"||"nextSibling");if(a){if(a=this.$(a),!a.hasClass("selectable")||a.hasClass("disabled"))return this._move(a,e,i);this.activate(a)}return this},_moveY:function(t,e){return this._move(t,e,function(i,a){var s,o=t.index(),h=i.parentNode&&i.parentNode[a],u=h&&h.childNodes[o],p=this.uidate;return u?u:t.hasClass("disabled")?null:(s=n(p),l(p,1),d(p,r(p)+(e?-1:1)),y=e?s-7+c(p):7-(f(p)-s),l(p,y),void this.refresh(!0))})},_moveX:function(t,e){return this._move(t,e,function(i,a){if(i[a])return i[a];var s=i.parentNode&&i.parentNode[a],n=s&&s.childNodes[e&&s.childNodes.length-1||0],o=this.uidate;return n?n:t.hasClass("disabled")?null:(d(o,r(o)+(e?-1:1)),l(o,e?c(o):1),void this.refresh(!0))})},_keydownCalendar:function(t,e){var i,a=t.which,s=this.keycode;if(a!==s.tab)switch(t.preventDefault(),i=this.activeDay,a){case s.up:case s.down:return e&&this._moveY(i,a===s.up);case s.left:case s.right:return e&&this._moveX(i,a===s.left);case s.esc:return this.hide(!0);case s.pageup:case s.pagedown:return this.moveMonth(a===s.pageup,!0);case s.enter:case s.space:return e&&this.select()||this._handleControl(t);case s.home:case s.end:return void(e&&this.activate(a===s.home?1:c(this.uidate)))}},_isMatch:function(t,e){e=e||this.date;var i,a,s,n,r="string"==typeof e?this.std(e):e,o=!1;return r.setHours(0,0,0,0),n=r.getTime(),this.each(t,function(t){if(s="string"==typeof t?t.split("/"):[t],s.length<2){if(i="string"==typeof t?this.std(t):t,i.setHours(0,0,0,0),n===i.getTime())return o=!0,!1}else for(i=this.std(s[0]),a=this.std(s[1]);i.getTime()<=a.getTime();){if(n===i.getTime())return o=!0,!1;i.setDate(i.getDate()+1)}}),o},input:function(t){return this.$(this.inputs[t])},data:function(){var t=this.config,e=t.formats,i=e.days.length,a=this.uidate;return{weeks:this.buildCalendar(a),inputs:this.map(this.inputs,function(t){return this.buildInput(t)}),caption:this.format("caption",{month:this.format(e.month,r(a)),year:this.format(e.year,o(a))}),controls:[{name:"prev-yr",label:e.prevYr},{name:"prev-mo",label:e.prevMo},{name:"next-mo",label:e.nextMo},{name:"next-yr",label:e.nextYr}],days:this.map(this.formatmap.days,function(t){return{day:t,label:i<4?t.slice(0,i):t}})}},buildInput:function(t){var e,i,a,a=this.$(t),s=this.config,n=this.date,r=this,l=!1,d=[],h={label:a.attr("aria-label"),labelid:r.uid(),label_trigger:s.formats.label_trigger};return s.format.replace(this.xSearch,function(t,u,c){"ddd"===u||"dddd"===u?d.push({spacer:u+c}):(e=u.slice(0,1),i=/y/i.test(e),a=r.uid(),l||(l=!0,h.inputid=a),d.push({key:e,format:u,spacer:c,desc:s.formats["label_"+e],descid:r.uid(),labelid:h.labelid,number:i,select:!i,options:r.buildEntry(e,u),value:i&&r.valid(n)?o(n):null,id:a}))}),h.parts=d,h},buildEntry:function(t,e){var i=(e.length,[]),a=this.valid(this.date)?this.date:null,s=!1;return"d"===t?(s=!0,this.each(new Array(31),function(t,s){i.push({selected:!!a&&s+1===n(this.date),label:this.format(e,s+1),value:s+1})})):"m"===t&&(s=!0,i=this.map(this.formatmap.months,function(t,i){return{selected:!!a&&i===r(this.date),label:this.format(e,i),value:i}})),s&&i.unshift({selected:!a,label:e,value:""}),i},buildCalendar:function(t){var e,i,s,r,o=a(),u=c(t),f=p(t),m=n(t),y=[];for(t.setHours(0,0,0,0),s={days:[]},h(o,t),d(o,t.getMonth()-1),e=c(o),i=e-(f-1),r=0;i<=e;i++)l(o,i),s.days.push(this.buildDay(o,r++,!1,!1,!0));for(l(o,1),h(o,t),d(o,t),r=1;r<=u;r++)l(o,r),s.days.push(this.buildDay(o,f++,!0,r===m)),f>6&&(y.push(s),f=0,s={days:[]});if(0!==f)for(l(o,1),d(o,o.getMonth()+1),r=1;f<=6;f++)l(o,r++),s.days.push(this.buildDay(o,f,!1,!1,!0));return y.push(s),y},buildDay:function(t,e,i,s,l){var d=a(),h=this.config,u=h.formats,f=this.isUnavailable(t),p=[],m=n(t);return l&&!h.rollover?{rollover:!0}:(this.each(h.special,function(e,i){this.isSpecial(i,t)&&p.push(i)}),{value:this.dts(t),date:m,label:this.format("label_calendar",{day:n(t),month:this.format(u.month,r(t)),year:this.format(u.year,o(t))}),active:s,disabled:f,selectable:!f,holiday:this.isHoliday(t),blackout:this.isBlackout(t),special:p.join(" "),rollover:h.rollover,weekend:!e||e>5,day:this.formatmap.days[e],today:d===t,id:this.name+"-"+this.uid(),first:1===m,last:m===c(t)})},activate:function(t){var e,i=this.activeDay,a=this.calendar;return e=void 0===t?i:this.$(t),e.length&&(this.node("day",a).removeClass("active"),this.node("table",this.calendar).attr("aria-activedescendant",e.attr("id")),this.uidate=this.std(e.data("value"),"yyyy-mm-dd"),e.addClass("active"),this.emit("activate",e)),this},select:function(t,e){void 0===t&&(t=this.activeDay.data("value"));var i="string"==typeof t?this.std(t):t,a=this.dts(i),s=this.days.filter('[data-value="'+a+'"]');if(!this.isUnavailable(i))return this.activate(s),this.setDate(i)&&e!==!0&&(this.emit("change"),this.hide(!0)),this},valid:function(t){var e=t.getTime();return!isNaN(e)&&e>this.MIN&&e<this.MAX},setDate:function(t){t.setHours(0,0,0,0);var e=t.getTime(),i=this.date,s="date";a();return i.setHours(0,0,0,0),e!==i.getTime()&&(!!this.valid(t)&&(this[s]=t,this.inputs[0].value=this.dts(t),this._updateEntries(),!0))},adjust:function(t,e){var i=this.min,a=this.max,s=this.controls,c=[];return i&&(o(t)<o(i)?(u(t,i),c.push(".prev-yr",".prev-mo")):o(t)===o(i)&&(h(t,i),c.push(".prev-yr"),r(t)<=r(i)&&(d(t,i),c.push(".prev-mo"),n(t)<=n(i)&&l(t,i)))),a&&(o(t)>o(a)?(u(t,a),c.push(".prev-yr",".prev-mo")):o(t)>=o(a)&&(h(t,a),c.push(".next-yr"),r(t)>=r(a)&&(d(t,a),c.push(".next-mo"),n(t)>=n(a)&&l(t,a)))),e&&(s.prop("disabled",!1),this.each(c,function(t){var e=s.filter(t);e.hasClass("focused")&&this.node("table",this.calendar).focus(),e.prop("disabled",!0)})),t},refresh:function(t){var e=this.adjust(this.uidate,!0),i=this.calendar,a=this.config.formats,s=this.html("body",{weeks:this.buildCalendar(e)});return this.node("body",i).remove(),this.node("table",i).append(s),t&&this.node("table",i).focus(),this.heading.text(this.format("caption",{month:this.format(a.month,r(e)),year:this.format(a.year,o(e))})),this.activate(),this},moveMonth:function(t,e){var i=this.uidate;return d(i,r(i)+(t?-1:1)),this.refresh(e)},moveYear:function(t,e){var i=this.uidate;return h(i,o(i)+(t?-1:1)),this.refresh(e)},setValue:function(t,e,i){return v(i||this.uidate,e,t)},getValue:function(t,e){return b(e||this.uidate,t)},format:function(t,e){return"object"==typeof e?this.super(t,e):("undefined"==typeof e&&(e=this.getValue(t)),m(e,t,this.formatmap))},unformat:function(t,e){var i=this,a=i.formatmap;switch(t){case"m":case"d":case"mm":case"dd":case"yyyy":return parseInt(e,10);case"mmm":return e=e.toLowerCase(),this.first(a.months,function(t,i){if(t.indexOf(e)>-1)return i});case"mmmm":return a.months.indexOf(e.toLowerCase())}return NaN},std:function(t,e){return k(t,e||this.formats.native)},dts:function(t,e){return g(t||this.date,e||this.formats.native)},disable:function(){return this.enabled&&(this.each(this.node("input",this.shadow),function(t){this.node("entry",t).prop("disabled",!0)}),this.calendar.addClass("disabled"),this.input(0).prop("disabled",!0)),this},enable:function(){return this.disabled&&(this.each(this.node("input",this.shadow),function(t){this.node("entry",t).prop("disabled",!1)}),this.calendar.removeClass("disabled"),this.input(0).prop("disabled",!1)),this},show:function(){var t=this.calendar;return this.isPopup&&this.enabled&&this.isHidden&&(this.delay(function(){t.addClass("in").attr("aria-hidden","false"),this.node("table",t).focus(),this.emit("show")}),this.transition(t,function(){t.removeClass("in")})),this},hide:function(t){var e,i=this.calendar;return this.isPopup&&this.isOpen&&(this.delay(function(){i.addClass("out").attr("aria-hidden","true"),this.emit("hide")}),this.transition(i,function(){i.removeClass("out"),t&&(e=this.shadow.data("trigger-index"),void 0!==e&&(this.trigger[e].focus(),this.shadow.data("trigger-index",null)))})),this},toggle:function(t){return this.enabled&&this.isHidden?this.show():this.hide(t)},isHoliday:function(t){return this._isMatch(this.config.holidays,t)},isBlackout:function(t){return this._isMatch(this.config.blackouts,t)},isSpecial:function(t,e){return this._isMatch(this.config.special[t]||[],e)},isUnavailable:function(t){t=t||this.date;var e="string"==typeof t?this.std(t):t;return e.setHours(0,0,0,0),!!(this.max&&e.getTime()>this.max.getTime()||this.min&&e.getTime()<this.min.getTime())||this.isBlackout(e)},update:function(){return this.configure(this.config),this.refresh(),this._updateEntries(),this.disabled?this.disable():this.enable(),this}});var C=e.get("Datepicker");return C.dts=function(t,e){return g(t,e)},C.std=function(t,e){return k(t,e)},e.get("Datepicker")});