!function(t,i){if("function"==typeof define&&define.amd)define(["mk"],function(o){return i(t,o)});else{if("object"!=typeof module||!module.exports)return i(t,t.Mk);module.exports=i(t,require("mk"))}}("undefined"!=typeof window&&window||this,function(t,i){if("undefined"==typeof i.Tooltip)throw new Error("Mk.Dialog: Tooltip base class not found.");return i.create("Dialog",i.Tooltip,{name:"mk-dg",modal:null,get locked(){return this.root.hasClass("locked")},get unlocked(){return!this.locked},get isOpen(){return"false"===this.modal.attr("aria-hidden")},get isHidden(){return!this.isOpen},get focusable(){return this.isFocusable(this.modal)},configure:function(t){t=t||{},t.position=t.position||"none",this.param("arrow","boolean",t,!1),this.super(t)},mount:function(){this.link(),this.modal=this.$("#"+this.root.attr("aria-describedby")),this.config.arrow&&this.modal.addClass("arrow")},unmount:function(){this.super(),this.modal=null},bind:function(){var t=this;this.root;this.device||this.root.on("mouseenter.mk",function(i){i.preventDefault(),t._focus(this,i,!1)}).on("mouseleave.mk",function(i){i.preventDefault(),t._blur(this,i,!1)}),this.root.on("focus.mk",!0,function(i){i.preventDefault(),t._focus(this,i,!0)}).on("blur.mk",!0,function(i){i.preventDefault(),t._blur(this,i,!0)}).on("click.mk",function(i){i.preventDefault(),t._click()}).on("keyup.mk",function(i){t._keyup(i)})},_keyup:function(t){t.which===this.keycode.esc&&this.hide()},_click:function(){(this.device||"click"===this.root.data("action"))&&this.toggle()},_bindModalBlur:function(){var t=this.modal,i=this;t.on("blur.mk",!0,function(o){var s=o.relatedTarget;(!s||i.$(s).parent(t).length<1)&&(t.off("blur.mk"),s||i.hide())})},link:function(){return this.super(this.root)},position:function(){return this.super(this.root,this.modal)},focus:function(){var t=this.root,i=this.modal.find(this.selector("kill"));return i.length<1&&(i=this.html("kill"),i.on("focus.mk",function(){t.focus()}),this.modal.append(i)),this},show:function(t){return this.unlocked&&this.isHidden&&(this.hideAll(),this.delay(function(){this.modal.removeClass("out").addClass("in").attr("aria-hidden","false"),this.position(),this._bindModalDown(this.root,this.modal),this.focusable&&this.focus(),this.root.addClass("active"),t||this.emit("show",this.root[0],this.modal[0])}),this.transition(this.modal,function(t,i){i.removeClass("in")})),this},hide:function(t,i){var o,s=this.root.attr("data-action");return this.unlocked&&this.isOpen&&(o=t!==!0&&"click"!==s&&this.focusable&&this.config.delay||0,this.delay(function(){this.modal.removeClass("in").addClass("out").attr("aria-hidden","true"),this._unbindModalDown(this.modal),t!==!0&&this.transitions||(this.modal.removeClass("out"),this.clearTransitions(this.modal)),this.root.removeClass("active"),i||this.emit("hide",this.root[0],this.modal[0])},o),this.transition(this.modal,function(t,i){i.removeClass("out")})),this},hideAll:function(){return this.hide()},toggle:function(){return this.isOpen?this.hide():this.show()},lock:function(){return this.root.hasClass("locked")||(this.root.addClass("locked"),this.emit("lock",this.root[0],!0)),this},unlock:function(){return this.root.hasClass("locked")&&(this.root.removeClass("locked"),this.emit("lock",this.root[0],!1)),this}}),i.get("Dialog")});