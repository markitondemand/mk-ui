<!DOCTYPE html><html><head><title>Mk[ui]</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../docs/assets/css/bootstrap.css"><link rel="stylesheet" type="text/css" href="../docs/assets/css/prism.css"><link rel="stylesheet" type="text/css" href="../docs/assets/css/theme.css"><link rel="stylesheet" type="text/css" href="../dist/css/autocomplete.css"><link rel="stylesheet" type="text/css" href="../docs/assets/css/autocomplete.css"></head><body><header><nav class="navbar navbar-default navbar-theme"><div class="navbar-header"><div class="navbar-brand clearfix"><img class="navbar-logo" src="../docs/assets/images/logo.png"><span class="navbar-details"><span class="navbar-title">/Autocomplete [ac]</span><span class="navbar-quote">Flexible, Accessible Web Components</span></span></div></div><ul class="nav navbar-top"><li class="active"><a target="_blank" href="http://codepen.io/micha3ldavid/post/mk-ui">Codepen</a></li><li><a target="_blank" href="https://github.com/micha3ldavid/mk-ui">Github</a></li></ul></nav></header><main class="container"><div class="row"><div class="col-sm-6"><h2>Dependencies</h2><table class="table"><thead><tr><th>Name</th><th>File</th></tr></thead><tbody><tr><td><a href="../">Core</a></td><td>dist/js/core.js</td></tr><tr><td><a href="./docs/selectmenu.html">Selectmenu</a></td><td>dist/js/selectmenu.js</td></tr></tbody></table></div><div class="col-sm-6"><h2>Assets</h2><table class="table"><thead><tr><th>Type</th><th>File</th></tr></thead><tbody><tr><td>js</td><td>dist/js/autocomplete.js</td></tr><tr><td>css</td><td>dist/css/autocomplete.css</td></tr><tr><td>less</td><td>dist/less/autocomplete.less</td></tr><tr><td>scss</td><td>dist/scss/autocomplete.scss</td></tr></tbody></table></div></div><h2>Examples</h2><div class="row"><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">One Selection, Predefined Data.</h2></header><div class="panel-body"><p>Bare bones Autocomplete example. You can select one result from a prefefined list of data or enter your own text.</p><div class="mk-ac-root"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-1"></div></div></section></div><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Four Selections</h2></header><div class="panel-body"><p>Same setup as the last, except this time you can select up to four entries.
You can change the number of selections with the limit (or data-limit) config option.</p><div class="mk-ac-root"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-2" data-limit="4"></div></div></section></div><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Categories &amp; Headers</h2></header><div class="panel-body"><p>To use categories, your data must be an array of objects with a 'label' and 'items' property. The 'items' is an array of results the user can select from and each result must contain at least a 'label' and 'value' property.</p><div class="mk-ac-root" id="categories"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-3" data-limit="4"></div></div></section></div></div><div class="row"><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Remote URLs</h2></header><div class="panel-body"><p>Same setup as the last (up to four total entires) but this time we're hitting a remote endpoint for data.
You can achieve remote/xhr ability by hooking into the request events (see Events Section).</p><div class="mk-ac-root" id="remote"><input class="mk-ac" type="text" placeholder="Search for a symbol" name="symbol-4" data-limit="4"></div></div></section></div><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Comma Seperate</h2></header><div class="panel-body"><p>Add the ability to split user entires by comma and enter those values into the selections stack with the comma (or data-comma) config option.</p><div class="mk-ac-root"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-5" data-limit="4" data-comma="true"></div></div></section></div><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Only Allow Result Selections</h2></header><div class="panel-body"><p>Retstrict users to only select results from the result list and NOT enter anything they choose with the anything (or data-anything) config attribute.</p><div class="mk-ac-root"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-6" data-limit="4" data-anything="false"></div></div></section></div><div class="col-sm-4"><section class="panel panel-example"><header class="panel-heading"><h2 class="panel-title">Removed Tag UI</h2></header><div class="panel-body"><p>Remote the tag interface easily. Just set the notags (or data-notags) config option to true.</p><div class="mk-ac-root"><input class="mk-ac" type="text" placeholder="Movie Genres" name="symbol-7" data-comma="true" data-notags="true"></div></div></section></div></div><h2>Setup</h2><pre><code class="language-html">&lt;div class="mk-ac-root"&gt;
	&lt;input type="text" name="search" aria-label="Search for Stuff" placeholder="Search..." /&gt;
&lt;/div&gt;</code></pre><h3>Configuration Options via Data-Attributes</h3><p>There are two ways to configure Autocomplete, the first of which is by providing data attributes on the root input.
Below is a list of all possible data attributes you may add to configure an instance. All data attributes are optional.</p><pre><code class="language-html">&lt;div class="mk-ac-root"&gt;
	&lt;input type="text"
		name="search"
		aria-label="Search for Stuff"
		&lt;!-- Number of characters before filtering/requesting data. Default is 1. --&gt;
		data-chars="3"
		&lt;!-- time in milliseconds for a data request to kick off after user entry. Default is 300. --&gt;
		data-time="500"
		&lt;!-- total number of possible results a user can select. Default is 1. --&gt;
		data-limit="4"
		&lt;!-- Allow the user to enter, or 'select,' anything they like, including their own input. Default is true. --&gt;
		data-anything="true"
		&lt;!-- Allows commas to seperate user entered values and add them to the selection list. Default is false. --&gt;
		data-comma="true"
		&lt;!-- Remove the tag UI. Default is false. --&gt;
		data-notags="false"
		&lt;!-- Allows delete (when text entry is '') to pop the last selected items from selections. --&gt;
		&lt;!-- Default is false for single select and true for more than one (limit &gt; 1). --&gt;
		data-doubledelete="true"
		&lt;!-- Search values as well as labels. Default is true. --&gt;
		data-searchvalues="false"
		placeholder="Search..." /&gt;
&lt;/div&gt;</code></pre><h2>Instantiation</h2><p>Below is an example of instantiating an Autocomplete.
Like all other Mk components, the first argument is the root and the second is configuration options.
In the example below, we've provided all possible config options, however, all config properties are completely optional.</p><pre><code class="language-javascript">//get autocomplete object
var Autocomplete = Mk.get('Autocomplete');
//
//create instance
var autocomplete = new Autocomplete('#selector', {
	//number of selections user is allowed. Default is 1
	limit: 1,
	//number of characters typed by user before kicking off a request/search. Default is 1
	chars: 3,
	//delay before trigering request events for data. Default is 300.
	time: 500,
	//allow the user to input/select anything (including anything they enter manually) Default is true.
	anything: true,
	//allows the doubledelete functionality to pop old selections. Default is true.
	doubledelete: false,
	//allows searching values as well as labels. Default is true.
	searchvalues: false,
	//hide the tag UI. Default is false.
	notags: false,
	//allow comma seperated user input to be split and added to selections. Default is false.
	comma: true,
	//data you would like to provide on instantiation (vs. remote requests).
	//you can also do both static and remote data.
	data: [
		..predefined data set..
		{
			label: 'Example Result 1',
			value: 'my-result-key'
		}
	],
	//template overrides/additions
	templates: {
		..template overrides..
	},
	//format overrides/additions
	formats: {
		..format overrides..
	},
	//events you want bound
	events: {
		..you can bind events here or by using on() one() and off()..
	}
});</code></pre><h2>Dynamic Data and Remote Urls</h2><p>Autocomplete does not take care of XMLHttpRequests, JSONP, or any other method of retrieving dynamic data to populate a users search.
We do, however, provide the proper hooks for you to tie your own custom requests into the Autocomplete.
This is actually great news. Now you can use whatever existing tools for remote requests your project is already using.
Below is an example of a JSONP call using jQuery, which hooks into the Autocomplete system.</p><pre><code class="language-javascript">//get the autocomplete object
var Autocomplete = Mk.get('Autocomplete');
//
//create an instance
var autocomplete = new Autocomplete('.mk-ac-root' /*, options */);
//will keep refernece to our ajax request
var xhr;
//
// set the request.send and request.abort events
autocomplete.on('request.send', function (query, requestnum) {
	//
	//you can use the 'requestnum'
	//to catch situations where an abort() procedure isn't possible.
	//see the success method for more info
	xhr = $.ajax({
		url: 'http://dev.markitondemand.com/Api/v2/Lookup/jsonp',
		data: {input: query},
		type: 'get',
		dataType: 'jsonp',
		success: function (data) {
			//
			//requests is a number keeping track of the current request count.
			//you can use that to check if a request is 'stale' and leave or abort an old request.
			if (autocomplete.requests &gt; requestnum) {
				//exit, we have a more current request coming
				return;
			}
			//
			//autocomplete expects two properties to function correctly: value and label.
			//our API endpoint does not hand back objects with those properties, but we can set them...
			autocomplete.each(data, function (obj, index) {
				obj.label = obj.Name;
				obj.value = obj.Symbol;
			});
			//
			//We're also going to store the retrieved data in the autocomplete cache.
			//This way if the user searches the same term again, we'll pull it from cache vs. sending another request.
			autocomplete.setCache(query, data);
			//
			//finally, it's time to render out data.
			autocomplete.render(data, query);
		},
		error: function () {
			//autocomplete has events already set up if/when an error occurs.
			//The events notify screen readers and users of what's going on, so it's important to wire them in.
			//you can also add your own handlers to the request.error event.
			autocomplete.emit('request.error');
		}
	});
	//
	// lets also set up an abort events
	autocomplete.on('request.abort', function () {
		//abort our xhr request if possible.
		//we can also use the requests/requestnum logic to do our own aborting.
		if (xhr) xhr.abort();
	})
});</code></pre><h2>Events</h2><p>All events are part of the Mk EventEmitter and *not* added to the DOM.
Events are also called in context of the component instance so it isn't a great idea to use a proxy function to change context, as you'll loose a lot of beneficial object access.</p><div class="row"><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">render</h3></header><div class="panel-body"><p>Fired when data has been retrieved and the list is ready to be built. Binding this event replaces the original rending with your own, custom, rendering.</p><pre><code class="language-javascript">
instance.on('render', function (data) {
	console.info(data);
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">change</h3></header><div class="panel-body"><p>Fires when autocomplete value changes.</p><pre><code class="language-javascript">
instance.on('change', function () {
	console.info('base 64:', this.value);
	console.info('raw objects:', this.selections);
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">submit</h3></header><div class="panel-body"><p>Fires when autocomplete submit button is clicked/pressed.</p><pre><code class="language-javascript">
instance.on('submit', function () {
	console.info('base 64:', this.value);
	console.info('raw objects:', this.selections);
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">show</h3></header><div class="panel-body"><p>Fired when menu is shown.</p><pre><code class="language-javascript">
instance.on('show', function () {
	console.info('Menu has opened!');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">hide</h3></header><div class="panel-body"><p>Fired when menu is hidden.</p><pre><code class="language-javascript">
instance.on('hide', function () {
	console.info('Menu has closed!');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">activate</h3></header><div class="panel-body"><p>Fired when an option becomes active.</p><pre><code class="language-javascript">
instance.on('activate', function (option, keyboard) {
	console.info('active option:', option);
	console.info('came from keyboard (vs mouse):', keyboard);
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">disabled</h3></header><div class="panel-body"><p>Fired when selectmenu is disabled, if previously enabled.</p><pre><code class="language-javascript">
instance.on('disabled', function () {
	console.info('Selectmenu has been diabled.');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">enabled</h3></header><div class="panel-body"><p>Fired when selectmenu is enabled, if previously disabled.</p><pre><code class="language-javascript">
instance.on('enabled', function () {
	console.info('Selectmenu has become enabled.');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">update</h3></header><div class="panel-body"><p>Fired when updates are made to the rendered UI through the use of update().</p><pre><code class="language-javascript">
instance.on('update', function () {
	console.info('Changes to the native select have been applied to the UI.');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">capacity</h3></header><div class="panel-body"><p>Fired when you've reached the selection limit. Does not fire for single selects.</p><pre><code class="language-javascript">
instance.on('capacity', function () {
	console.info('We reached capacity!');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">create.tag</h3></header><div class="panel-body"><p>Fired when a tab is being created. You can customize the tag properties through here.</p><pre><code class="language-javascript">
instance.on('create.tag', function (o) {
	o.label = 'New Label!';
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">request.send</h3></header><div class="panel-body"><p>Used when hooking into request logic to send requests to the server for data.</p><pre><code class="language-javascript">
instance.on('request.send', function (query, requestnumber) {
	console.info('about to search for ', query);
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">request.error</h3></header><div class="panel-body"><p>Since remote requests are left the end developers, this event must be emit by the end developer as well, typically in an error handler. Since the end developer emits this event, you may pass in any arguments you like.</p><pre><code class="language-javascript">
instance.on('request.error', function () {
	console.info('request failed');
});
		</code></pre></div></section></div><div class="col-sm-6"><section class="panel panel-event"><header class="panel-heading"><h3 class="panel-title">request.abort</h3></header><div class="panel-body"><p>Fired when a request is being aborted.</p><pre><code class="language-javascript">
instance.on('request.abort', function () {
	console.info('my request is being aborted due to new user actions.');
});
		</code></pre></div></section></div></div><h2>API</h2><p>Below are the different public properties and methods accessible to you, the end developer.
All of these are accessible on your Autocomplete [ac] instance as well as inside event handlers bound to your instance.
Some methods have intentionally been left out due to their difficulty tof use for end developers vs. internal use.</p><div class="row"><div class="col-sm-6"><h3>Methods</h3><ul class="list-unstyled list-methods"><li><h4><em>instance</em><span>.unmount()</span></h4><p>Remove all mounted nodes, data, events, and cache associated with the Autocomplete instance to free up memory and resources.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.move([up])</span></h4><p>Move the active list item up or down from the currently activated.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>up</dd></dl><dl><dt>Type</dt><dd>Boolean</dd></dl><dl><dt>Description</dt><dd>Set to true to move up the list. Default is false.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.search(key[, add])</span></h4><p>Runs a search for the query.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>key</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>a string representing query text.</dd></dl></li><li><dl><dt>Name</dt><dd>add</dd></dl><dl><dt>Type</dt><dd>Boolean</dd></dl><dl><dt>Description</dt><dd>Add the the current query, or replace the current query. Default is false (replace).</dd></dl></li></ul></li><li><h4><em>instance</em><span>.request()</span></h4><p>Invokes the request event handlers associated with the autocomplete instance. If your autocomplete uses dynaimc data (API endpoints), setup a requset event to hook your requset into.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.flatten(value)</span></h4><p>Invokes JSON.stringify and btoa on an object.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>Object</dd></dl><dl><dt>Description</dt><dd>Object to convert to a flattened string.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.unflatten(value)</span></h4><p>Invokes atob and JSON.parse on a string.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>String to convert back into an object.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.hasCache(key)</span></h4><p>Returns true when cache exists for a query, false when it does not.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>key</dd></dl><dl><dt>Type</dt><dd>string</dd></dl><dl><dt>Description</dt><dd>a previously searched query.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.getCache(key)</span></h4><p>Returns data for a previously cached query.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>key</dd></dl><dl><dt>Type</dt><dd>string</dd></dl><dl><dt>Description</dt><dd>a previously searched query.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.setCache(key, data)</span></h4><p>Caches object for a given query.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>key</dd></dl><dl><dt>Type</dt><dd>string</dd></dl><dl><dt>Description</dt><dd>a string represending query text.</dd></dl></li><li><dl><dt>Name</dt><dd>data</dd></dl><dl><dt>Type</dt><dd>Object/Array</dd></dl><dl><dt>Description</dt><dd>Object to be cached.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.data([value])</span></h4><p>Generate a JSON representation of the current autocomplete state.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>Cache key for query data. Empty will give you static data (if provided).</dd></dl></li></ul></li><li><h4><em>instance</em><span>.filterData(key, data)</span></h4><p>Filters a dataset by query text.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>key</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>a string represending query text.</dd></dl></li><li><dl><dt>Name</dt><dd>data</dd></dl><dl><dt>Type</dt><dd>Array</dd></dl><dl><dt>Description</dt><dd>A dataset as Array (typically of objects).</dd></dl></li></ul></li><li><h4><em>instance</em><span>.prepData(data[, query])</span></h4><p>Prep a date set for use with templating and user interactions.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>data</dd></dl><dl><dt>Type</dt><dd>Array</dd></dl><dl><dt>Description</dt><dd>An array of (typically) objects. Objects must contain a 'value' and 'label' property for templating and mapping.</dd></dl></li><li><dl><dt>Name</dt><dd>query</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>A text term used for term highlighting results for the user.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.select(value[, silent])</span></h4><p>Selects a value from results, or a custom value provided by you.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>a flattened string representing a selection object.</dd></dl></li><li><dl><dt>Name</dt><dd>silent</dd></dl><dl><dt>Type</dt><dd>Boolean</dd></dl><dl><dt>Description</dt><dd>Pass true to prevent change events from triggering.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.deselect(value[, silent])</span></h4><p>Deselects a value from results, or a custom value provided by you.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>a flattened string representing a selection object.</dd></dl></li><li><dl><dt>Name</dt><dd>silent</dd></dl><dl><dt>Type</dt><dd>Boolean</dd></dl><dl><dt>Description</dt><dd>Pass true to prevent change events from triggering.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.deselectAll([silent])</span></h4><p>Removes all current selections.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>silent</dd></dl><dl><dt>Type</dt><dd>Boolean</dd></dl><dl><dt>Description</dt><dd>Pass true to prevent change events from triggering.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.exists(value)</span></h4><p>Check raw object against autocomplete selections for a match.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>value</dd></dl><dl><dt>Type</dt><dd>Object</dd></dl><dl><dt>Description</dt><dd>Object with a property named 'value' to check for selection matches.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.abort()</span></h4><p>Invokes the abort event to let end developer know they should cancel their current request, if any.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.error()</span></h4><p>Method invoked when request error event is emit. When making requests for search term data, if an error occurs, emit the error event to invoke this functionality.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.blur()</span></h4><p>Invokes XHR abort event and stops internal loading processes.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.clear()</span></h4><p>Clears screen reader text, list results, and close the menu.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.pop()</span></h4><p>Pop a selection from the current collection.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.notify(type[, query])</span></h4><p>Sends text notifications to the screen reader about the state of the Autocomplete. Also applies state classes (request loading for example) to the Autocomplete.</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>type</dd></dl><dl><dt>Type</dt><dd>CONSTANT</dd></dl><dl><dt>Description</dt><dd>CONSTANT value from instance.NOTIFY_STATES which determines what format text to use for screen readers and user message updating.</dd></dl></li><li><dl><dt>Name</dt><dd>query</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>Used in the format text for screen readers and user message updates.</dd></dl></li><li><dl><dt>Name</dt><dd>count</dd></dl><dl><dt>Type</dt><dd>Number</dd></dl><dl><dt>Description</dt><dd>Result count. Only used for the NOTIFY_STATES.LOADED type representing the number of results returned from the request.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.updateRoot()</span></h4><p>Updates the root input to reflect the current Autocomplete selections.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li><li><h4><em>instance</em><span>.render(data[, query])</span></h4><p>Renders a result list based off the data parameter provided</p><h5>Parameters</h5><ul class="list-unstyled list-params"><li><dl><dt>Name</dt><dd>data</dd></dl><dl><dt>Type</dt><dd>Array</dd></dl><dl><dt>Description</dt><dd>Array of data objects to create a list from. Data objects must contain a 'label' and 'value' property.</dd></dl></li><li><dl><dt>Name</dt><dd>query</dd></dl><dl><dt>Type</dt><dd>String</dd></dl><dl><dt>Description</dt><dd>The query term representing the data set. Used for screen readers. If not provided, default is instance.query property.</dd></dl></li></ul></li><li><h4><em>instance</em><span>.update()</span></h4><p>Make changes to your original input then call this for the UI to consume new changes.</p><ul class="list-unstyled list-params"><li><strong>No params required.</strong></li></ul></li></ul></div><div class="col-sm-6"><h3>Properties</h3><ul class="list-unstyled list-property"><li><h4><em>instance.</em><span>input</span></h4><p>The wrapped, rendered triggering input element.</p></li><li><h4><em>instance.</em><span>tagroot</span></h4><p>The wrapped root element holding tags.</p></li><li><h4><em>instance.</em><span>tags</span></h4><p>The wrapped collection of UI tags.</p></li><li><h4><em>instance.</em><span>live</span></h4><p>The wrapped live element responsible for updating screen reader users with atomic information.</p></li><li><h4><em>instance.</em><span>notifications</span></h4><p>Similar to the live element, but hold notifications such as when a request fails.</p></li><li><h4><em>instance.</em><span>isLoading</span></h4><p>Boolean representing if the autocomplete is requesting data.</p></li><li><h4><em>instance.</em><span>limit</span></h4><p>Number of selections an autocompelete instance can have</p></li><li><h4><em>instance.</em><span>doubledelete</span></h4><p>Boolean representing whether doubledelete is enabled.</p></li><li><h4><em>instance.</em><span>multiple</span></h4><p>Boolean representing if the use can select more than one result.</p></li><li><h4><em>instance.</em><span>capacity</span></h4><p>Boolean representing if the autocomplete is at max selections.</p></li><li><h4><em>instance.</em><span>anything</span></h4><p>Boolean representing if the autocomplete will accept any value or only a value from the result list.</p></li><li><h4><em>instance.</em><span>searchvalues</span></h4><p>Boolean representing whether searchvalues is enabled. If false, only labels are searched.</p></li><li><h4><em>instance.</em><span>value</span></h4><p>String value set on your root's input element. The value is flattened, which means it's an object that's been base64 encoded.</p></li><li><h4><em>instance.</em><span>empty</span></h4><p>Boolean representing if we have no results.</p></li><li><h4><em>instance.</em><span>remote</span></h4><p>Boolean representing if our instance is equipt to make XHR requests for data.</p></li><li><h4><em>instance.</em><span>deletecount</span></h4><p>How many times delete has been pressed in a row. Used with doubledelete.</p></li><li><h4><em>instance.</em><span>selections</span></h4><p>Array of objects holding the value/label pairs currently selected.</p></li><li><h4><em>instance.</em><span>requests</span></h4><p>How many requests have been kicked off in total.</p></li><li><h4><em>instance.</em><span>cache</span></h4><p>Object containing all cached requests.</p></li><li><h4><em>instance.</em><span>query</span></h4><p>The current query string.</p></li></ul></div></div></main><script type="text/javascript" language="javascript" src="../docs/assets/js/prism.js"></script><script type="text/javascript" language="javascript" src="../src/js/core.js"></script><script type="text/javascript" src="../docs/assets/js/jquery.js"></script><script type="text/javascript" src="../src/js/selectmenu.js"></script><script type="text/javascript" src="../src/js/autocomplete.js"></script><script>Mk.transitions.enable();

var inputs = Mk.$('.mk-ac-root'),
	Autocomplete = Mk.get('Autocomplete'),
	autocomplete;

inputs.each(function (el) {

	if (el.id && el.id === 'remote') {

		autocomplete = new Autocomplete(el, {
			events: {
				'create.tag': function (obj) {
					obj.label = obj.raw.value;
				},
				'request.send': function (query, requestnum) {

					var ac = this;

					$.ajax({
						url: 'http://dev.markitondemand.com/Api/v2/Lookup/jsonp',
						data: {input: query},
						type: 'get',
						dataType: 'jsonp',
						success: function (data) {

							if (ac.requests !== requestnum) {
								ac.abort();
								return;
							}

							ac.each(data, function (obj) {
								obj.label = obj.Name;
								obj.value = obj.Symbol;
							});

							ac.setCache(query, data);
							ac.render(data, query);
						},
						error: function () {
							ac.emit('request.error');
						}
					});
				}
			}
		});
	}
	else if (el.id && el.id === 'categories') {

		autocomplete = new Autocomplete(el, {
			data: [
				{
					label: 'Fun Movies',
					items: [
						{
							label: 'Comedy',
							value: 'Comedy'
						},
						{
							label: 'Disney',
							value: 'Disney'
						},
						{
							label: 'Action',
							value: 'Action'
						},
						{
							label: 'Adventure',
							value: 'Adventure'
						}
					]
				},
				{
					label: 'Intense Movies',
					items: [
						{
							label: 'Horror',
							value: 'Horror'
						},
						{
							label: 'Thriller',
							value: 'Thriller'
						},
						{
							label: 'SyFi',
							value: 'SyFi'
						},
						{
							label: 'Drama',
							value: 'Drama'
						}
					]
				},
				{
					label: 'You Never Knows',
					items: [
						{
							label: 'Fantasy',
							value: 'Fantasy'
						},

						{
							label: 'Romance',
							value: 'Romance'
						},
						{
							label: 'Independent',
							value: 'Independent'
						}
					]
				}
			]
		});
	}
	else {

		autocomplete = new Autocomplete(el, {
			data: [{
				label: 'Comedy',
				value: 'Comedy'
			},
			{
				label: 'Horror',
				value: 'Horror'
			},
			{
				label: 'Thriller',
				value: 'Thriller'
			},
			{
				label: 'Disney',
				value: 'Disney'
			},
			{
				label: 'Action',
				value: 'Action'
			},
			{
				label: 'Adventure',
				value: 'Adventure'
			},
			{
				label: 'Fantasy',
				value: 'Fantasy'
			},
			{
				label: 'SyFi',
				value: 'SyFi'
			},
			{
				label: 'Drama',
				value: 'Drama'
			},
			{
				label: 'Romance',
				value: 'Romance'
			},
			{
				label: 'Independent',
				value: 'Independent'
			}]
		});
	}

	autocomplete
	.on('activate', function (node, keyboard) {

		if (keyboard) {
			var data = this.unflatten(node.attr('data-value'));
			this.input.val(data.value);
		}
	})
	.on('change', function () {
		console.info('selections (raw):', this.selections);
		console.info('value (base64):', this.value)
	})
	.on('submit', function () {
		alert('Submit fired!\nData:\n' + JSON.stringify(this.selections));
	});
});</script></body></html>